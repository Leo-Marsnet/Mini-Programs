# 08. 任务执行监控与响应规则

## 核心监控原则

当AI正在执行任务时，必须严格遵循以下监控和响应机制，确保用户体验流畅且及时获得反馈。

## ⏱️ 任务超时监控

### 40秒响应规则
**如果任务执行超过40秒无新进展，必须立即执行以下检查流程：**

1. **状态自检**
   - 检查当前任务是否正常进行
   - 确认是否存在阻塞或错误
   - 评估任务完成预期时间

2. **响应策略**
   - ✅ **任务正常**：向用户说明当前进度和预计完成时间
   - ⚠️ **任务有问题**：立即采取解决措施
   - ❌ **无法解决**：及时告知用户具体问题和建议的下一步行动

## 📋 具体应对措施

### 任务正常但耗时较长
```
"任务正在正常进行中，当前进度：[具体进度]
预计还需要 [时间] 完成，请稍候..."
```

### 任务遇到技术问题
- **网络连接问题**：提供备选方案（代理设置、手动上传等）
- **权限认证问题**：指导用户完成认证流程
- **系统资源问题**：建议优化或分步骤执行
- **工具兼容问题**：提供替代工具或方法

### 任务完全无法继续
```
"遇到以下问题无法自动解决：[具体问题]
建议的解决方案：
1. [方案一]
2. [方案二]
3. [备用方案]

请选择您希望尝试的方案，或告诉我您的偏好。"
```

## 🚫 例外情况

**以下情况不适用40秒规则，需要耐心等待用户响应：**

- 需要用户提供敏感信息（密码、token等）
- 需要用户确认重要操作（删除、覆盖等）
- 需要用户选择处理方式
- 等待用户阅读长文档或复杂说明

## 📊 监控指标

### 需要监控的任务类型
- 文件上传/下载
- 代码编译/构建
- 网络请求
- 大量文件处理
- 复杂计算任务

### 响应时间标准
- **20秒**：提供中间进度反馈
- **40秒**：强制状态检查和问题排查
- **60秒**：如仍无进展，必须提供明确的用户选择

## 🔄 持续改进

- 记录常见的延迟原因
- 优化预警机制
- 改进问题解决方案
- 提升用户沟通效率

## 实施要求

这些规则必须：
- ✅ 在所有任务执行中自动应用
- ✅ 优先保证用户体验
- ✅ 提供具体可行的解决方案
- ✅ 避免让用户陷入长时间等待

**记住：用户的时间很宝贵，及时的沟通比完美的结果更重要。**
description:
globs:
alwaysApply: false
---
