# Taro + React + TypeScript é¡¹ç›®å¼€å‘è§„åˆ™

## âš ï¸ æ ¸å¿ƒæ¶æ„è§„åˆ™ï¼ˆå¿…é¡»ä¸¥æ ¼éµå®ˆï¼‰

### ğŸ—ï¸ åŒç›®å½•æ¶æ„
æœ¬é¡¹ç›®é‡‡ç”¨**Taro + React + TypeScript**è·¨ç«¯å¼€å‘æ¡†æ¶ï¼š
- **ä¸»ç›®å½•**: Cursorå¼€å‘ç¯å¢ƒï¼Œæºä»£ç åœ¨ `src/` ç›®å½•
- **miniprogramç›®å½•**: ç¼–è¯‘è¾“å‡ºç›®å½•ï¼Œä¾›å¾®ä¿¡å¼€å‘è€…å·¥å…·ä½¿ç”¨

### ğŸ¯ ç»å¯¹è§„åˆ™ï¼šæ‰€æœ‰å¼€å‘éƒ½åœ¨ src/ ç›®å½•ä¸‹

å½“ç”¨æˆ·è¦æ±‚å¼€å‘åŠŸèƒ½æ—¶ï¼Œ**å¿…é¡»**åœ¨ `src/` ç›®å½•ä¸‹æ“ä½œï¼š

âœ… **æ­£ç¡®æ“ä½œï¼š**
```
src/pages/profile/index.tsx         # åˆ›å»ºé¡µé¢
src/components/user-card/index.tsx  # åˆ›å»ºç»„ä»¶
src/utils/request.ts                # åˆ›å»ºå·¥å…·å‡½æ•°
src/config/index.ts                 # ä¿®æ”¹é…ç½®
src/assets/images/icon.png          # æ·»åŠ é™æ€èµ„æº
```

âŒ **ç¦æ­¢æ“ä½œï¼š**
```
miniprogram/pages/profile/index.tsx  # âŒ miniprogramæ˜¯ç¼–è¯‘è¾“å‡ºç›®å½•
pages/profile/index.tsx              # âŒ ä¸è¦åœ¨æ ¹ç›®å½•åˆ›å»ºé¡µé¢
components/user-card/index.tsx       # âŒ ä¸è¦åœ¨æ ¹ç›®å½•åˆ›å»ºç»„ä»¶
```

### ğŸ“ å¼€å‘å‰æ£€æŸ¥æ¸…å•
1. âœ… æ‰€æœ‰æºç æ–‡ä»¶åœ¨ `src/` ç›®å½•ä¸‹
2. âœ… é¡µé¢ä½¿ç”¨ `.tsx` æ‰©å±•åï¼ˆTypeScript + JSXï¼‰
3. âœ… ç»„ä»¶ä½¿ç”¨ React Functional Components + Hooks
4. âœ… é¡µé¢å·²åœ¨ `src/app.config.ts` ä¸­æ³¨å†Œ
5. âœ… ä½¿ç”¨ Taro 3.x API è§„èŒƒ

## ğŸ› ï¸ Taro + React å¼€å‘è§„èŒƒ

### é¡¹ç›®ç»“æ„
```
src/
â”œâ”€â”€ app.tsx              # åº”ç”¨å…¥å£æ–‡ä»¶
â”œâ”€â”€ app.config.ts        # å…¨å±€é…ç½®æ–‡ä»¶
â”œâ”€â”€ app.scss            # å…¨å±€æ ·å¼æ–‡ä»¶
â”œâ”€â”€ pages/              # é¡µé¢ç›®å½•
â”‚   â””â”€â”€ index/
â”‚       â”œâ”€â”€ index.tsx   # é¡µé¢ç»„ä»¶
â”‚       â”œâ”€â”€ index.config.ts  # é¡µé¢é…ç½®
â”‚       â””â”€â”€ index.scss  # é¡µé¢æ ·å¼
â”œâ”€â”€ components/         # å…¬å…±ç»„ä»¶
â”œâ”€â”€ utils/             # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ auth.ts        # è®¤è¯å·¥å…·
â”‚   â”œâ”€â”€ loading.ts     # åŠ è½½å·¥å…·
â”‚   â”œâ”€â”€ request.ts     # ç½‘ç»œè¯·æ±‚
â”‚   â””â”€â”€ storage.ts     # å­˜å‚¨å·¥å…·
â”œâ”€â”€ store/             # çŠ¶æ€ç®¡ç†
â”œâ”€â”€ assets/            # é™æ€èµ„æº
â””â”€â”€ types/             # TypeScriptç±»å‹å®šä¹‰
```

### é¡µé¢å¼€å‘æ ‡å‡†
```tsx
// src/pages/example/index.tsx
import { useState, useEffect } from 'react'
import { View, Text, Button } from '@tarojs/components'
import Taro from '@tarojs/taro'
import './index.scss'

export default function Example() {
  const [data, setData] = useState<any>(null)

  useEffect(() => {
    // é¡µé¢åŠ è½½æ—¶æ‰§è¡Œ
    loadData()
  }, [])

  const loadData = async () => {
    // æ•°æ®åŠ è½½é€»è¾‘
  }

  const handleClick = () => {
    console.log('æŒ‰é’®ç‚¹å‡»')
  }

  return (
    <View className="container">
      <Text>Hello Taro + React</Text>
      <Button onClick={handleClick}>ç‚¹å‡»æŒ‰é’®</Button>
    </View>
  )
}
```

### ç»„ä»¶å¼€å‘æ ‡å‡†
```tsx
// src/components/user-card/index.tsx
import { View, Text, Image } from '@tarojs/components'
import './index.scss'

interface UserCardProps {
  user: {
    name: string
    avatar: string
  }
  onTap?: () => void
}

export default function UserCard({ user, onTap }: UserCardProps) {
  return (
    <View className="user-card" onClick={onTap}>
      <Image src={user.avatar} className="avatar" />
      <Text className="name">{user.name}</Text>
    </View>
  )
}
```

### é…ç½®æ–‡ä»¶è§„èŒƒ
```typescript
// src/pages/example/index.config.ts
import { PageConfig } from '@tarojs/taro'

const config: PageConfig = {
  navigationBarTitleText: 'ç¤ºä¾‹é¡µé¢',
  enablePullDownRefresh: true,
  backgroundColor: '#f5f5f5'
}

export default config
```

## ğŸ”§ å¼€å‘å·¥ä½œæµ

### æ„å»ºå‘½ä»¤
```bash
# å¾®ä¿¡å°ç¨‹åºå¼€å‘ï¼ˆéœ€è¦è®¾ç½®Nodeç¯å¢ƒå˜é‡ï¼‰
NODE_OPTIONS="--openssl-legacy-provider" pnpm run dev:weapp

# å¾®ä¿¡å°ç¨‹åºæ„å»º
NODE_OPTIONS="--openssl-legacy-provider" pnpm run build:weapp

# H5å¼€å‘
pnpm run dev:h5

# H5æ„å»º
pnpm run build:h5
```

### åˆ›å»ºæ–°é¡µé¢
1. åœ¨ `src/pages/` ä¸‹åˆ›å»ºé¡µé¢ç›®å½•
2. åˆ›å»º `index.tsx` (é¡µé¢ç»„ä»¶)
3. åˆ›å»º `index.config.ts` (é¡µé¢é…ç½®)
4. åˆ›å»º `index.scss` (é¡µé¢æ ·å¼)
5. åœ¨ `src/app.config.ts` ä¸­æ³¨å†Œé¡µé¢è·¯å¾„

### åˆ›å»ºæ–°ç»„ä»¶
1. åœ¨ `src/components/` ä¸‹åˆ›å»ºç»„ä»¶ç›®å½•
2. åˆ›å»º `index.tsx` (ç»„ä»¶ä»£ç )
3. åˆ›å»º `index.scss` (ç»„ä»¶æ ·å¼)
4. å¯¼å‡ºç»„ä»¶ä¾›å…¶ä»–é¡µé¢ä½¿ç”¨

## ğŸ¨ æ ·å¼å¼€å‘è§„èŒƒ

### å“åº”å¼å•ä½
```scss
// ä½¿ç”¨ Taro çš„å°ºå¯¸è½¬æ¢
.container {
  width: 750px;        // è‡ªåŠ¨è½¬æ¢ä¸º rpx
  padding: 20px;       // è‡ªåŠ¨è½¬æ¢ä¸º rpx
  font-size: 32px;     // è‡ªåŠ¨è½¬æ¢ä¸º rpx
}
```

### SCSS è¯­æ³•
```scss
// å˜é‡å®šä¹‰
$primary-color: #07c160;
$border-radius: 8px;

// åµŒå¥—è¯­æ³•
.user-card {
  background: white;
  border-radius: $border-radius;

  .avatar {
    width: 60px;
    height: 60px;
    border-radius: 50%;
  }

  .name {
    color: $primary-color;
    font-weight: bold;
  }
}
```

## ğŸ“¦ å·¥å…·å‡½æ•°ä½¿ç”¨

### ç½‘ç»œè¯·æ±‚
```typescript
// src/utils/request.ts
import { request } from '@/utils/request'

// GETè¯·æ±‚
const userData = await request.get('/api/user')

// POSTè¯·æ±‚
const result = await request.post('/api/login', {
  username: 'admin',
  password: '123456'
})
```

### æœ¬åœ°å­˜å‚¨
```typescript
// src/utils/storage.ts
import storage from '@/utils/storage'

// å­˜å‚¨æ•°æ®
storage.set('userInfo', { name: 'å¼ ä¸‰', age: 25 })

// è·å–æ•°æ®
const userInfo = storage.get('userInfo')

// å¸¦è¿‡æœŸæ—¶é—´çš„å­˜å‚¨
storage.setWithExpiry('token', 'abc123', 24 * 60 * 60 * 1000) // 24å°æ—¶è¿‡æœŸ
```

### å…¨å±€çŠ¶æ€ç®¡ç†
```typescript
// src/utils/store.ts
import { useGlobalStore } from '@/utils/store'

const Component = () => {
  const { user, setUser } = useGlobalStore()

  return (
    <View>
      <Text>ç”¨æˆ·å: {user?.name}</Text>
    </View>
  )
}
```

## ğŸš€ æ€§èƒ½ä¼˜åŒ–

### React Hooksä¼˜åŒ–
```tsx
import { useMemo, useCallback } from 'react'

const Component = () => {
  // ç¼“å­˜è®¡ç®—ç»“æœ
  const expensiveValue = useMemo(() => {
    return heavyCalculation(data)
  }, [data])

  // ç¼“å­˜å‡½æ•°å¼•ç”¨
  const handleClick = useCallback(() => {
    console.log('ç‚¹å‡»å¤„ç†')
  }, [])

  return <View onClick={handleClick}>{expensiveValue}</View>
}
```

### ä»£ç åˆ†å‰²
- ä½¿ç”¨ Taro çš„åˆ†åŒ…é…ç½®
- æ‡’åŠ è½½éæ ¸å¿ƒç»„ä»¶
- æŒ‰é¡µé¢å’ŒåŠŸèƒ½æ¨¡å—åˆ†å‰²ä»£ç 

## ğŸ“± å¤šç«¯é€‚é…

### å¹³å°å·®å¼‚å¤„ç†
```typescript
import Taro from '@tarojs/taro'

// è·å–å½“å‰å¹³å°
const platform = Taro.getEnv()

if (platform === Taro.ENV_TYPE.WEAPP) {
  // å¾®ä¿¡å°ç¨‹åºç‰¹æœ‰é€»è¾‘
} else if (platform === Taro.ENV_TYPE.H5) {
  // H5ç‰¹æœ‰é€»è¾‘
}
```

### æ¡ä»¶ç¼–è¯‘
```typescript
// ä½¿ç”¨ Taro çš„æ¡ä»¶ç¼–è¯‘
if (process.env.TARO_ENV === 'weapp') {
  // å¾®ä¿¡å°ç¨‹åºä»£ç 
}
if (process.env.TARO_ENV === 'h5') {
  // H5ä»£ç 
}
```

## ğŸ” TypeScriptè§„èŒƒ

### ç±»å‹å®šä¹‰
```typescript
// src/types/user.ts
export interface User {
  id: string
  name: string
  avatar: string
  createdAt: Date
}

export interface ApiResponse<T> {
  code: number
  message: string
  data: T
}
```

### ç»„ä»¶Propsç±»å‹
```tsx
interface ComponentProps {
  title: string
  count?: number
  onSubmit: (data: any) => void
}

const Component: React.FC<ComponentProps> = ({ title, count = 0, onSubmit }) => {
  // ç»„ä»¶å®ç°
}
```

## ğŸ§ª å¼€å‘æµ‹è¯•

### è°ƒè¯•æµç¨‹
1. **ä¸»ç›®å½•å¼€å‘**: åœ¨ Cursor ä¸­ç¼–è¾‘ `src/` ä¸‹çš„æºç 
2. **å®æ—¶ç¼–è¯‘**: è¿è¡Œ `pnpm run dev:weapp` è‡ªåŠ¨ç¼–è¯‘åˆ° `miniprogram/`
3. **å¾®ä¿¡è°ƒè¯•**: å¾®ä¿¡å¼€å‘è€…å·¥å…·æ‰“å¼€ `miniprogram/` ç›®å½•è¿›è¡Œè°ƒè¯•

### é”™è¯¯å¤„ç†
- æŸ¥çœ‹ Taro ç¼–è¯‘é”™è¯¯ä¿¡æ¯
- ä½¿ç”¨ TypeScript ç±»å‹æ£€æŸ¥
- åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­æŸ¥çœ‹è¿è¡Œæ—¶é”™è¯¯

---

**ğŸ¯ è®°ä½ï¼šä½¿ç”¨ Taro + React + TypeScript å¼€å‘ï¼Œæºç åœ¨ `src/` ç›®å½•ï¼Œ`miniprogram/` æ˜¯ç¼–è¯‘è¾“å‡ºç›®å½•**
